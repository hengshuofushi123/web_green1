{% extends "_base.html" %}

{% block content %}
<h2>{{ action }}项目</h2>
<form method="post">
    <div class="row">
        <div class="col-md-6 mb-3">
            <label for="project_name" class="form-label">项目名称 *</label>
            <input type="text" class="form-control" id="project_name" name="project_name" value="{{ project.project_name or '' }}" required>
        </div>
        <div class="col-md-6 mb-3">
            <label for="company_name" class="form-label">公司名称</label>
            <input type="text" class="form-control" id="company_name" name="company_name" value="{{ project.company_name or '' }}">
        </div>
    </div>
    <div class="row">
        {% if is_admin %}
        <div class="col-md-6 mb-3">
            <label for="secondary_unit" class="form-label">二级单位 *</label>
            <input type="text" class="form-control" id="secondary_unit" name="secondary_unit" value="{{ project.secondary_unit or '' }}" required>
        </div>
        {% else %}
        <div class="col-md-6 mb-3">
            <label class="form-label">二级单位</label>
            <input type="text" class="form-control" value="{{ current_user.username }}" readonly>
            <input type="hidden" name="secondary_unit" value="{{ current_user.username }}">
        </div>
        {% endif %}
        <div class="col-md-6 mb-3">
            <label for="secondary_unit_contact" class="form-label">二级单位联系人</label>
            <input type="text" class="form-control" id="secondary_unit_contact" name="secondary_unit_contact" value="{{ project.secondary_unit_contact or '' }}">
        </div>
    </div>
    <div class="row">
        <div class="col-md-4 mb-3">
            <label for="province" class="form-label">项目所在省份</label>
            <input type="text" class="form-control" id="province" name="province" value="{{ project.province or '' }}">
        </div>
        <div class="col-md-4 mb-3">
            <label for="region" class="form-label">项目所在区域</label>
            <input type="text" class="form-control" id="region" name="region" value="{{ project.region or '' }}">
        </div>
        <div class="col-md-4 mb-3">
            <label for="investment_scope" class="form-label">项目投资口径</label>
            <input type="text" class="form-control" id="investment_scope" name="investment_scope" value="{{ project.investment_scope or '' }}">
        </div>
    </div>
    <div class="row">
        <div class="col-md-4 mb-3">
            <label for="project_nature" class="form-label">项目性质</label>
            <input type="text" class="form-control" id="project_nature" name="project_nature" value="{{ project.project_nature or '' }}">
        </div>
        <div class="col-md-4 mb-3">
            <label for="power_type" class="form-label">电源品种</label>
            <input type="text" class="form-control" id="power_type" name="power_type" value="{{ project.power_type or '' }}">
        </div>
        <div class="col-md-4 mb-3">
            <label for="capacity_mw" class="form-label">装机容量(万千瓦)</label>
            <input type="number" step="0.01" class="form-control" id="capacity_mw" name="capacity_mw" value="{{ project.capacity_mw or '' }}">
        </div>
    </div>
    <div class="row">
        <div class="col-md-4 mb-3">
            <label for="production_year" class="form-label">(预计)投产年份</label>
            <input type="number" class="form-control" id="production_year" name="production_year" value="{{ project.production_year or '' }}">
        </div>
        <div class="col-md-4 mb-3">
            <label for="production_month" class="form-label">(预计)投产月份</label>
            <input type="number" class="form-control" id="production_month" name="production_month" value="{{ project.production_month or '' }}">
        </div>
        <div class="col-md-4 mb-3">
            <label for="last_updated_date" class="form-label">核对及更新日期</label>
            <input type="date" class="form-control" id="last_updated_date" name="last_updated_date" value="{{ project.last_updated_date or '' }}">
        </div>
    </div>
    <div class="mb-3">
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="is_uhv_support" name="is_uhv_support" {{ 'checked' if project.is_uhv_support else '' }}>
            <label class="form-check-label" for="is_uhv_support">是否特高压配套电源</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="has_subsidy" name="has_subsidy" {{ 'checked' if project.has_subsidy else '' }}>
            <label class="form-check-label" for="has_subsidy">是否含补贴</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="is_filed" name="is_filed" {{ 'checked' if project.is_filed else '' }}>
            <label class="form-check-label" for="is_filed">是否建档立卡</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="is_beijing_registered" name="is_beijing_registered" {{ 'checked' if project.is_beijing_registered else '' }}>
            <label class="form-check-label" for="is_beijing_registered">是否完成北交注册</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="is_guangzhou_registered" name="is_guangzhou_registered" {{ 'checked' if project.is_guangzhou_registered else '' }}>
            <label class="form-check-label" for="is_guangzhou_registered">是否完成广交注册</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="is_green_cert_registered" name="is_green_cert_registered" {{ 'checked' if project.is_green_cert_registered else '' }}>
            <label class="form-check-label" for="is_green_cert_registered">是否完成绿证交易平台注册</label>
        </div>
    </div>
    <div class="mb-3">
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="has_beijing_transaction" name="has_beijing_transaction" {{ 'checked' if project.has_beijing_transaction else '' }}>
            <label class="form-check-label" for="has_beijing_transaction">在北交做过交易</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="has_guangzhou_transaction" name="has_guangzhou_transaction" {{ 'checked' if project.has_guangzhou_transaction else '' }}>
            <label class="form-check-label" for="has_guangzhou_transaction">在广交做过交易</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="has_green_cert_transaction" name="has_green_cert_transaction" {{ 'checked' if project.has_green_cert_transaction else '' }}>
            <label class="form-check-label" for="has_green_cert_transaction">在绿证交易平台做过交易</label>
        </div>
    </div>
    <button type="submit" class="btn btn-primary">保存项目</button>
    <a href="{{ url_for('index') }}" class="btn btn-secondary">取消</a>
</form>
{% endblock %}